<!DOCTYPE html>

<html>

<head>
<meta charset="UTF-8">
<title>未来の占い</title>
<link rel="stylesheet" type="text/css" href="./css/main.css"/>

<script src="./plug-in/jquery/jquery-3.4.1.js"></script>
<script>


$(document).ready(function(){
	
	debugger;
	String.prototype.getQuery = function(name)
	{
	    var reg = new RegExp("(^|&)"+ name+"=([^&]*)(&|$)");
	    var r = this.substr(this.indexOf("?")+1).match(reg);
	    if(r!=null) return decodeURIComponent(r[2]); 
	    return null;
	}
	var str = location.search;
	var paraUserIdVal = str.getQuery("userId");
	$("#id_user_id").text(paraUserIdVal);
	var paraResultVal = str.getQuery("result");
	var paraSeiVal = str.getQuery("sei");
	var paraMeiVal = str.getQuery("mei");
	var paraTelVal = str.getQuery("tel");
	var paraAddressVal = str.getQuery("address");
	var paraSelectVal = str.getQuery("selectVal");

	if("notView" == paraResultVal){
		$("#id_result_list").css('display','none');
		$("#id_btn_detail").addClass("btn-pink-display-none");
		$("#id_btn_update").addClass("btn-pink-display-none");
		$("#id_btn_delete").addClass("btn-pink-display-none");

	} else if("" == paraSeiVal || "zhang" == paraSeiVal) {
		$("#id_result_list").css('display','block');
		$("#id_btn_detail").addClass("btn-pink-gray");
		$("#id_btn_update").addClass("btn-pink-gray");
		$("#id_btn_delete").addClass("btn-pink-gray");

		$("#id_btn_detail").attr("disabled",true);
		$("#id_btn_update").attr("disabled",true);
		$("#id_btn_delete").attr("disabled",true);
	} else {
		$("#id_result_list").css('display','none');
		$("#id_btn_detail").addClass("btn-pink-display-none");
		$("#id_btn_update").addClass("btn-pink-display-none");
		$("#id_btn_delete").addClass("btn-pink-display-none");
	}
	if(paraSelectVal != null && paraSelectVal != "") {
  	  $("#id_btn_detail")[0].className="btn-pink";
	  $("#id_btn_update")[0].className="btn-pink";
	  $("#id_btn_delete")[0].className="btn-pink";
		$("#id_btn_detail").attr("disabled",false);
		$("#id_btn_update").attr("disabled",false);
		$("#id_btn_delete").attr("disabled",false);

		$("#id_rdo_selected_"+paraSelectVal).attr("checked",true);
		
	}
	
	$("#id_text_sei").val(paraSeiVal);
	$("#id_text_mei").val(paraMeiVal);
	$("#id_text_tel").val(paraTelVal);
	$("#id_text_address").val(paraAddressVal);

      $('input:radio[name="selectRadio"]').click(function(){
    	  $("#id_btn_detail")[0].className="btn-pink";
    	  $("#id_btn_update")[0].className="btn-pink";
    	  $("#id_btn_delete")[0].className="btn-pink";

			$("#id_btn_detail").attr("disabled",false);
			$("#id_btn_update").attr("disabled",false);
			$("#id_btn_delete").attr("disabled",false);
      });

      
      // ボタンコントロール
	  $("#id_btn_search").click(function(){
		  var paraCommon = '&sei='+$("#id_text_sei").val()+'&mei='+$("#id_text_mei").val()+'&tel='+$("#id_text_tel").val()+'&address='+$("#id_text_address").val();
		  window.location = 'list.html?userId='+paraUserIdVal+paraCommon;
		});
	  $("#id_btn_new").click(function(){
		  var paraCommon = '&sei='+$("#id_text_sei").val()+'&mei='+$("#id_text_mei").val()+'&tel='+$("#id_text_tel").val()+'&address='+$("#id_text_address").val();
		  window.location = 'info.html?userId='+paraUserIdVal+'&mode=new&selectVal='+$('input:radio[name="selectRadio"]:checked').val()+paraCommon;
		});
	  $("#id_btn_detail").click(function(){
		  var paraCommon = '&sei='+$("#id_text_sei").val()+'&mei='+$("#id_text_mei").val()+'&tel='+$("#id_text_tel").val()+'&address='+$("#id_text_address").val();
		  window.location = 'info.html?userId='+paraUserIdVal+'&mode=detail&selectVal='+$('input:radio[name="selectRadio"]:checked').val()+paraCommon;
		});
	  $("#id_btn_update").click(function(){
		  var paraCommon = '&sei='+$("#id_text_sei").val()+'&mei='+$("#id_text_mei").val()+'&tel='+$("#id_text_tel").val()+'&address='+$("#id_text_address").val();
		  window.location = 'info.html?userId='+paraUserIdVal+'&mode=update&selectVal='+$('input:radio[name="selectRadio"]:checked').val()+paraCommon;
		});
	  $("#id_btn_delete").click(function(){
		  var paraCommon = '&sei='+$("#id_text_sei").val()+'&mei='+$("#id_text_mei").val()+'&tel='+$("#id_text_tel").val()+'&address='+$("#id_text_address").val();
		  window.location = 'info.html?userId='+paraUserIdVal+'&mode=delete&selectVal='+$('input:radio[name="selectRadio"]:checked').val()+paraCommon;
		});
	});
</script>
</head>


<body>
<div class="background-color">
    <table width="100%">
        <tr>
            <td width="5%"></td>
            <td width="20%">
                <div align="right"><img src="./images/logo.png"/></div>
            </td>
            <td width="50%"><p align="center" style="color:white">未来の占い
            <br>＼世界で一番安い占い／</p>
            </td>
            <td align="right" width="25%"><a href="login.html" style="color: white;font-size: 12px">ログアウト</a></td>
        </tr>
    </table>
</div>

<div>
	<table width="100%">
		<tr>
			<td width="20%" class="background-color-td">姓</td>
			<td width="30%"><input id="id_text_sei" width="100%" type="text"></td>
			<td width="20%" class="background-color-td">名</td>
			<td width="30%"><input id="id_text_mei" width="100%" type="text"></td>
		</tr>
		<tr>
			<td width="20%" class="background-color-td">相談内容</td>
			<td width="30%"><input id="id_text_tel" width="100%" type="text"></td>
			<td width="20%" class="background-color-td">星座</td>
			<td width="30%"><input id="id_text_address" width="100%" type="text"></td>
		</tr>

	</table>
</div>

	<div align="right">
		<input id="id_btn_detail" type="button" value="詳細">
		<input id="id_btn_delete" type="button" value="削除">
		<input id="id_btn_update" type="button" value="更新">
		<input id="id_btn_new" class="btn-pink" type="button" value="新規">
		<input id="id_btn_search" class="btn-pink" type="button" value="検索">
		
	</div>
	<br><br>
	<div id="id_result_list" align="center">
		<table width="100%" border="1">
			<tr>
				<th class="background-color" width="4%">選択</th>
				<th class="background-color" width="4%">番号</th>
				<th class="background-color" width="10%">姓</th>
				<th class="background-color" width="10%">名</th>
				<th class="background-color" width="20%">生年月日</th>
				<th class="background-color" width="10%">価格</th>
				<th class="background-color" width="15%">相談内容</th>
				<th class="background-color" width="*%">星座</th>
			</tr>
			<tr>
				<td align="center"><input id="id_rdo_selected_1" name="selectRadio" type="radio" value="1"></td>
				<td align="right">01</td>
				<td>田中</td>
				<td>ヒカリ</td>
				<td align="center">1998/10/01</td>
				<td align="right">4,000,000</td>
				<td align="center">恋愛</td>
				<td>てんびん座</td>
			</tr>
			<tr>
				<td align="center"><input id="id_rdo_selected_2" name="selectRadio" type="radio" value="2"></td>
				<td align="right">02</td>
				<td>三浦</td>
				<td>真琴</td>
				<td align="center">1987/04/02</td>
				<td align="right">6,000,000</td>
				<td align="center">恋愛</td>
				<td>おひつじ座</td>
			</tr>
			<tr>
				<td align="center"><input id="id_rdo_selected_3" name="selectRadio" type="radio" value="3"></td>
				<td align="right">03</td>
				<td>川口</td>
				<td>綾香</td>
				<td align="center">1995/09/03</td>
				<td align="right">1,000,000</td>
				<td align="center">仕事</td>
				<td>乙女座</td>
			</tr>
			<tr>
				<td align="center"><input id="id_rdo_selected_4" name="selectRadio" type="radio" value="4"></td>
				<td align="right">04</td>
				<td>中村</td>
				<td>広重</td>
				<td align="center">1996/07/04</td>
				<td align="right">2,000,000</td>
				<td align="center">学業</td>
				<td>かに座</td>
			</tr>	
		</table>
	</div>
	<div class="footer">Mirai © Copyright 2021</div>
</body>
</html>